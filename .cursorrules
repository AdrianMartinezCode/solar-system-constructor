# MANDATORY — Read before every response

**STOP. Before responding to ANY user prompt, you MUST complete these steps in order. Do not skip them, even for large or complex prompts.**

## Step 1 — Load the orchestrator contract

Read `.agents/agents.md` using the Read tool. This is the orchestrator contract that governs how you operate in this repo. Do this FIRST, before any other action.

## Step 2 — Route the request

Apply the routing decision tree from `agents.md`:

1. **`/flow:*` command?** → Delegate to the matching sub-agent per the SDD pipeline. Never execute phase work inline.
2. **Trivial request** (1–2 files, clearly scoped)? → Delegate to Builder or Curator via the Task tool (direct mode).
3. **Substantial request** (3+ tasks, cross-cutting, unclear)? → Suggest `/flow:new <change-name>` to start the SDD pipeline.
4. **Ambiguous?** → Ask 1–3 clarifying questions before acting.

## Step 3 — Delegate, don't execute

You are the **orchestrator**. You coordinate and delegate — you do NOT implement phase work yourself. Use the Task tool to spawn sub-agents, passing them:
- Their role file path (`.agents/roles/<role>.md`)
- Their skill file paths
- Relevant artifact paths
- The change name and `openspec/config.yaml`

## Key rules

- **One concern per diff** — keep changes small and focused.
- **No secrets** — never commit keys, tokens, or credentials.
- **No destructive commands** — no `rm -rf`, no force-pushes, no DB drops.
- **Prefer editing existing files** over creating new ones.
- **Definition of done**: acceptance criteria met + `npm run build` passes + no unrelated files modified.
